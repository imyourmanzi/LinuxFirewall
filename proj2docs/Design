You are in the right direction. 
Consider the the system calls responsible for binding ports to a socket.  
